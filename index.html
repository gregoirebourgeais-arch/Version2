## üìÑ Fichier 1 : index.html
Action: file_editor view /app/index.html
Observation: /app/index.html:
1|<!DOCTYPE html>
2|<html lang="fr">
3|<head>
4|  <meta charset="UTF-8" />
5|  <title>Atelier PPNC - Production lignes</title>
6|
7|  <!-- PWA -->
8|  <link rel="manifest" href="manifest.json" />
9|  <meta name="theme-color" content="#005bff" />
10|  <link rel="icon" type="image/png" sizes="192x192" href="icon-192.png" />
11|  <link rel="icon" type="image/png" sizes="512x512" href="icon-512.png" />
12|  <link rel="apple-touch-icon" href="icons/icon-192.png" />
13|
14|  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
15|
16|  <link rel="stylesheet" href="style.css" />
17|
18|  <!-- Chart.js -->
19|  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
20|
21|  <!-- SheetJS -->
22|  <script src="https://cdn.jsdelivr.net/npm/xlsx@0.18.5/dist/xlsx.full.min.js"></script>
23|
24|  <script>
25|    if ("serviceWorker" in navigator) {
26|      window.addEventListener("load", () => {
27|        navigator.serviceWorker
28|          .register("service-worker.js")
29|          .catch((err) => console.error("SW registration failed", err));
30|      });
31|    }
32|  </script>
33|</head>
34|
35|<body>
36|  <header class="app-header">
37|    <div class="app-title">
38|      <span class="app-main-title">Atelier PPNC</span>
39|      <span class="app-sub-title">Suivi Production & Arr√™ts</span>
40|    </div>
41|    <div class="header-info" id="header-datetime">
42|      <!-- inject√© JS -->
43|    </div>
44|    <div style="display: flex; gap: 10px; align-items: center;">
45|      <select id="equipeSelector" class="equipe-selector">
46|        <option value="M">√âquipe M</option>
47|        <option value="AM">√âquipe AM</option>
48|        <option value="N">√âquipe N</option>
49|      </select>
50|      <button id="themeToggleBtn" class="theme-toggle">üåó Th√®me</button>
51|    </div>
52|  </header>
53|
54|  <!-- Barre de navigation -->
55|  <nav class="top-nav">
56|    <button class="nav-btn active" data-section="atelier">Atelier</button>
57|    <button class="nav-btn" data-section="production">Production</button>
58|    <button class="nav-btn" data-section="arrets">Arr√™ts</button>
59|    <button class="nav-btn" data-section="organisation">Organisation</button>
60|    <button class="nav-btn" data-section="personnel">Personnel</button>
61|    <button class="nav-btn" data-section="validation">Validation DDM</button>
62|    <button class="nav-btn" data-section="historique">Historique √©quipes</button>
63|  </nav>
64|
65|  <main>
66|    <!-- PAGE ATELIER -->
67|    <section id="section-atelier" class="section visible">
68|      <h2>Vue d'ensemble Atelier</h2>
69|
70|      <div class="atelier-grid">
71|        <div class="card">
72|          <h3>Production par ligne (aujourd'hui)</h3>
73|          <div id="atelier-lines-summary"></div>
74|        </div>
75|
76|        <div class="card">
77|          <h3>√âvolution des cadences</h3>
78|          <canvas id="atelierChart"></canvas>
79|          <p class="helper-text">
80|            Une courbe par ligne, bas√©e sur les enregistrements de production.
81|          </p>
82|        </div>
83|
84|        <div class="card">
85|          <h3>Arr√™ts principaux</h3>
86|          <div class="table-wrapper-horizontal">
87|            <table class="table" id="atelier-arrets-table">
88|              <thead>
89|                <tr>
90|                  <th>Ligne</th>
91|                  <th>Sous-ligne</th>
92|                  <th>Machine</th>
93|                  <th>Dur√©e (min)</th>
94|                  <th>Commentaire</th>
95|                </tr>
96|              </thead>
97|              <tbody></tbody>
98|            </table>
99|          </div>
100|        </div>
101|
102|        <div class="card">
103|          <h3>Export Excel</h3>
104|          <p class="helper-text">
105|            Export pour pr√©sentation en r√©union (5 onglets : Synth√®se, Production, Arr√™ts, Organisation, Personnel).
106|          </p>
107|
108|          <button id="exportPresentationBtn" class="primary-btn" style="margin-bottom: 15px;">
109|            üìà Export PR√âSENTATION
110|          </button>
111|
112|          <p class="helper-text" style="margin-top: 20px;">
113|            RAZ d'√©quipe : exporte DATA + PR√âSENTATION de l'√©quipe finissante, puis reset complet.
114|          </p>
115|
116|          <button id="razBtn" class="danger-btn">
117|            üîÑ RAZ √©quipe (double export + reset)
118|          </button>
119|        </div>
120|      </div>
121|    </section>
122|
123|    <!-- PAGE PRODUCTION -->
124|    <section id="section-production" class="section">
125|      <div class="production-layout">
126|        <aside class="lines-sidebar">
127|          <h3>Lignes</h3>
128|          <div class="lines-list" id="linesList"></div>
129|        </aside>
130|
131|        <div class="line-content">
132|          <h2 id="currentLineTitle">Ligne</h2>
133|
134|          <div class="card">
135|            <h3>Saisie production</h3>
136|            <div class="form-grid">
137|              <div class="form-group">
138|                <label for="prodStartTime">Heure d√©but</label>
139|                <input type="time" id="prodStartTime" />
140|              </div>
141|
142|              <div class="form-group">
143|                <label for="prodEndTime">Heure fin</label>
144|                <input type="time" id="prodEndTime" />
145|              </div>
146|
147|              <div class="form-group">
148|                <label for="prodQuantity">Quantit√© produite (colis)</label>
149|                <input type="number" id="prodQuantity" min="0" />
150|              </div>
151|
152|              <div class="form-group">
153|                <label for="prodCodeArticle">Code article (optionnel)</label>
154|                <input type="text" id="prodCodeArticle" />
155|              </div>
156|
157|              <div class="form-group">
158|                <label for="prodRemaining">Quantit√© restante (colis)</label>
159|                <input type="number" id="prodRemaining" min="0" />
160|              </div>
161|
162|              <div class="form-group">
163|                <label for="prodCadenceManual">Cadence manuelle (colis/h)</label>
164|                <input type="number" id="prodCadenceManual" min="0" step="0.01" />
165|              </div>
166|
167|              <div class="form-group">
168|                <label for="prodArretMinutes">Arr√™ts (min)</label>
169|                <input type="number" id="prodArretMinutes" min="0" />
170|              </div>
171|
172|              <div class="form-group form-group-wide">
173|                <label for="prodComment">Commentaire</label>
174|                <textarea id="prodComment" rows="2"></textarea>
175|              </div>
176|            </div>
177|
178|            <div class="info-row">
179|              <div>
180|                <strong>Cadence :</strong>
181|                <span id="prodCadenceDisplay">-</span> colis/heure
182|              </div>
183|              <div>
184|                <strong>Temps restant :</strong>
185|                <span id="prodRemainingTimeDisplay">-</span>
186|              </div>
187|            </div>
188|
189|            <div class="buttons-row">
190|              <button id="prodSaveBtn" class="primary-btn">üíæ Enregistrer</button>
191|              <button id="prodUndoBtn" class="secondary-btn">‚Ü©Ô∏è Annuler dernier</button>
192|            </div>
193|          </div>
194|
195|          <div class="card">
196|            <h3>Historique de la ligne</h3>
197|            <div class="table-wrapper-horizontal">
198|              <table class="table" id="prodHistoryTable">
199|                <thead>
200|                  <tr>
201|                    <th>Date/Heure</th>
202|                    <th>√âquipe</th>
203|                    <th>D√©but</th>
204|                    <th>Fin</th>
205|                    <th>Qt√©</th>
206|                    <th>Arr√™t</th>
207|                    <th>Cadence</th>
208|                    <th>Temps restant</th>
209|                    <th>Commentaire</th>
210|                    <th>Article</th>
211|                    <th>Suppr.</th>
212|                  </tr>
213|                </thead>
214|                <tbody></tbody>
215|              </table>
216|            </div>
217|          </div>
218|
219|        </div>
220|      </div>
221|    </section>
222|
223|    <!-- PAGE ARRETS -->
224|    <section id="section-arrets" class="section">
225|      <div class="card">
226|        <h2>Nouvel arr√™t</h2>
227|
228|        <div class="form-row">
229|          <label for="arretLine">Ligne impact√©e :</label>
230|          <select id="arretLine"></select>
231|        </div>
232|
233|        <div class="form-row">
234|          <label for="arretSousZone">Sous-zone :</label>
235|          <select id="arretSousZone"></select>
236|        </div>
237|
238|        <div class="form-row">
239|          <label for="arretMachine">Machine :</label>
240|          <select id="arretMachine"></select>
241|        </div>
242|
243|        <div class="form-row">
244|          <label for="arretArticle">Code article (optionnel)</label>
245|          <input type="text" id="arretArticle" />
246|        </div>
247|
248|        <div class="form-row">
249|          <label for="arretDuration">Dur√©e (min) :</label>
250|          <input type="number" id="arretDuration" min="0" />
251|        </div>
252|
253|        <div class="form-row">
254|          <label for="arretComment">Commentaire :</label>
255|          <textarea id="arretComment" rows="3"></textarea>
256|        </div>
257|
258|        <button id="arretSaveBtn" class="primary-btn">üíæ Enregistrer l'arr√™t</button>
259|      </div>
260|
261|      <div class="card">
262|        <h2>Historique des arr√™ts</h2>
263|        <div class="table-wrapper">
264|          <table id="arretsHistoryTable" class="data-table">
265|            <thead>
266|              <tr>
267|                <th>Date/Heure</th>
268|                <th>Ligne</th>
269|                <th>Sous-zone</th>
270|                <th>Machine</th>
271|                <th>Article</th>
272|                <th>Dur√©e (min)</th>
273|                <th>Commentaire</th>
274|                <th>Suppr.</th>
275|              </tr>
276|            </thead>
277|            <tbody></tbody>
278|          </table>
279|        </div>
280|      </div>
281|    </section>
282|
283|    <!-- PAGE ORGANISATION -->
284|    <section id="section-organisation" class="section">
285|      <h2>Organisation / Consignes</h2>
286|
287|      <div class="card">
288|        <h3>Nouvelle consigne</h3>
289|        <div class="form-grid">
290|          <div class="form-group form-group-wide">
291|            <label for="orgConsigne">Consigne</label>
292|            <textarea id="orgConsigne" rows="3"></textarea>
293|          </div>
294|
295|          <div class="form-group">
296|            <label for="orgVisa">Visa</label>
297|            <input type="text" id="orgVisa" />
298|          </div>
299|        </div>
300|
301|        <div class="buttons-row">
302|          <button id="orgSaveBtn" class="primary-btn">üíæ Enregistrer consigne</button>
303|        </div>
304|      </div>
305|
306|      <div class="card">
307|        <h3>Historique des consignes</h3>
308|        <table class="table" id="orgHistoryTable">
309|          <thead>
310|            <tr>
311|              <th>Date/Heure</th>
312|              <th>√âquipe</th>
313|              <th>Consigne</th>
314|              <th>Visa</th>
315|              <th>Valid√©e ?</th>
316|            </tr>
317|          </thead>
318|          <tbody></tbody>
319|        </table>
320|      </div>
321|    </section>
322|
323|    <!-- PAGE PERSONNEL -->
324|    <section id="section-personnel" class="section">
325|      <h2>Personnel</h2>
326|
327|      <div class="card">
328|        <h3>√âv√©nement personnel</h3>
329|        <div class="form-grid">
330|          <div class="form-group">
331|            <label for="persNom">Nom</label>
332|            <input type="text" id="persNom" />
333|          </div>
334|
335|          <div class="form-group">
336|            <label for="persMotif">Motif</label>
337|            <select id="persMotif">
338|              <option value="Absence">Absence</option>
339|              <option value="Retard">Retard</option>
340|              <option value="D√©part">D√©part</option>
341|              <option value="Autre">Autre</option>
342|            </select>
343|          </div>
344|
345|          <div class="form-group form-group-wide">
346|            <label for="persComment">Commentaire</label>
347|            <textarea id="persComment" rows="2"></textarea>
348|          </div>
349|        </div>
350|
351|        <div class="buttons-row">
352|          <button id="persSaveBtn" class="primary-btn">üíæ Enregistrer</button>
353|        </div>
354|      </div>
355|
356|      <div class="card">
357|        <h3>Historique personnel</h3>
358|        <table class="table" id="persHistoryTable">
359|          <thead>
360|            <tr>
361|              <th>Date/Heure</th>
362|              <th>√âquipe</th>
363|              <th>Nom</th>
364|              <th>Motif</th>
365|              <th>Commentaire</th>
366|            </tr>
367|          </thead>
368|          <tbody></tbody>
369|        </table>
370|      </div>
371|    </section>
372|
373|    <!-- PAGE VALIDATION DDM -->
374|    <section id="section-validation" class="section">
375|      <h2>Validation DDM</h2>
376|
377|      <div class="card">
378|        <h3>Calcul de la DDM</h3>
379|
380|        <div class="form-grid">
381|          <div class="form-group">
382|            <label for="ddmQuantieme">Quanti√®me fabrication</label>
383|            <input type="number" id="ddmQuantieme" min="1" max="366" placeholder="Ex: 100" />
384|          </div>
385|
386|          <div class="form-group">
387|            <label for="ddmAnnee">Ann√©e fabrication</label>
388|            <input type="number" id="ddmAnnee" placeholder="Ex: 2024" />
389|          </div>
390|
391|          <div class="form-group">
392|            <label for="ddmDuree">Dur√©e de vie (jours)</label>
393|            <input type="number" id="ddmDuree" min="0" placeholder="Ex: 90" />
394|          </div>
395|        </div>
396|
397|        <div class="buttons-row">
398|          <button id="ddmCalcBtn" class="primary-btn">üßÆ Calculer DDM</button>
399|        </div>
400|
401|        <p class="ddm-result">
402|          DDM calcul√©e : <strong id="ddmResult">-</strong>
403|        </p>
404|      </div>
405|    </section>
406|
407|    <!-- PAGE HISTORIQUE EQUIPES -->
408|    <section id="section-historique" class="section">
409|      <div class="card">
410|        <h2>Historique des √©quipes</h2>
411|
412|        <label for="historySelect">√âquipe / p√©riode enregistr√©e :</label>
413|        <select id="historySelect">
414|          <option value="">-- S√©lectionner --</option>
415|        </select>
416|      </div>
417|
418|      <div class="card">
419|        <h3>Vue d'ensemble</h3>
420|        <div id="history-lines-summary" class="summary-grid"></div>
421|      </div>
422|
423|      <div class="card">
424|        <h3>√âvolution des cadences</h3>
425|        <canvas id="historyChart"></canvas>
426|      </div>
427|
428|      <div class="card">
429|        <h3>Arr√™ts (classement par dur√©e)</h3>
430|        <table id="history-arrets-table" class="data-table">
431|          <thead>
432|            <tr>
433|              <th>Ligne</th>
434|              <th>Sous-ligne</th>
435|              <th>Machine</th>
436|              <th>Dur√©e (min)</th>
437|              <th>Commentaire</th>
438|            </tr>
439|          </thead>
440|          <tbody></tbody>
441|        </table>
442|      </div>
443|
444|      <div class="card" id="history-organisation" style="display: none;">
445|        <h3>Organisation / Consignes</h3>
446|        <table class="data-table">
447|          <thead>
448|            <tr>
449|              <th>Date/Heure</th>
450|              <th>√âquipe</th>
451|              <th>Consigne</th>
452|              <th>Visa</th>
453|              <th>Valid√©e</th>
454|            </tr>
455|          </thead>
456|          <tbody></tbody>
457|        </table>
458|      </div>
459|
460|      <div class="card" id="history-personnel" style="display: none;">
461|        <h3>Personnel</h3>
462|        <table class="data-table">
463|          <thead>
464|            <tr>
465|              <th>Date/Heure</th>
466|              <th>√âquipe</th>
467|              <th>Nom</th>
468|              <th>Motif</th>
469|              <th>Commentaire</th>
470|            </tr>
471|          </thead>
472|          <tbody></tbody>
473|        </table>
474|      </div>
475|    </section>
476|
477|    <!-- CALCULATRICE FLOTTANTE -->
478|    <div id="calculator" class="calculator hidden">
479|      <div class="calc-header">
480|        <span>Calculatrice</span>
481|        <button id="calcCloseBtn" class="calc-close-btn">‚úï</button>
482|      </div>
483|
484|      <input type="text" id="calcDisplay" class="calc-display" readonly />
485|
486|      <div class="calc-grid">
487|        <button class="calc-btn" data-value="7">7</button>
488|        <button class="calc-btn" data-value="8">8</button>
489|        <button class="calc-btn" data-value="9">9</button>
490|        <button class="calc-btn op" data-value="/">√∑</button>
491|
492|        <button class="calc-btn" data-value="4">4</button>
493|        <button class="calc-btn" data-value="5">5</button>
494|        <button class="calc-btn" data-value="6">6</button>
495|        <button class="calc-btn op" data-value="*">√ó</button>
496|
497|        <button class="calc-btn" data-value="1">1</button>
498|        <button class="calc-btn" data-value="2">2</button>
499|        <button class="calc-btn" data-value="3">3</button>
500|        <button class="calc-btn op" data-value="-">‚àí</button>
501|
502|        <button class="calc-btn" data-value="0">0</button>
503|        <button class="calc-btn" data-value=".">.</button>
504|        <button class="calc-btn" data-action="clear">C</button>
505|        <button class="calc-btn op" data-value="+">+</button>
506|
507|        <button class="calc-btn equals" data-action="equals">=</button>
508|      </div>
509|    </div>
510|
511|    <button id="calcToggle" class="calculator-toggle">üßÆ</button>
512|
513|  </main>
514|
515|  <!-- SCRIPT PRINCIPAL -->
516|  <script src="app.js"></script>
517|</body>
518|</html>
519|
